# **PROMOT SIMPLIFICADO: MELHORIA DO CHAT, WHATSAPP E MEMÃ“RIA DA ISA**

## **ğŸ¯ OBJETIVO**
Ajustar e melhorar trÃªs abas crÃ­ticas do painel da ISA para tornÃ¡-las mais funcionais, integradas e modernas, focando na experiÃªncia do usuÃ¡rio final.

## **ğŸ“± ABA 1: CHAT WHATSAPP (CORREÃ‡ÃƒO E MODERNIZAÃ‡ÃƒO)**

### **PROBLEMAS ATUAIS A RESOLVER**
- âŒ SÃ³ mostra mensagens **recebidas**, nÃ£o as **enviadas**
- âŒ NÃ£o atualiza automaticamente (precisa dar refresh)
- âŒ Interface bÃ¡sica e pouco intuitiva

### **SOLUÃ‡Ã•ES E MELHORIAS**

#### **1. ESTRUTURA DA TELA**
```
[Layout: TrÃªs colunas]
â”œâ”€â”€ COLUNA 1: LISTA DE CONVERSAS (25%)
â”‚   â€¢ Busca rÃ¡pida de contatos
â”‚   â€¢ Lista de conversas com: foto, nome, Ãºltima mensagem, horÃ¡rio
â”‚   â€¢ Badge com nÃºmero de mensagens nÃ£o lidas
â”‚   â€¢ Destaque para conversa ativa
â”‚
â”œâ”€â”€ COLUNA 2: ÃREA DO CHAT (50%)
â”‚   â€¢ CabeÃ§alho com: foto do contato, nome, status online/offline
â”‚   â€¢ HistÃ³rico completo de mensagens (recebidas E enviadas)
â”‚   â€¢ IdentificaÃ§Ã£o clara:
â”‚     - Mensagem recebida: fundo cinza, alinhada Ã  esquerda, Ã­cone ğŸ‘¤
â”‚     - Mensagem enviada: fundo azul/verde, alinhada Ã  direita, Ã­cone ğŸ§ 
â”‚   â€¢ Status de entrega: âœ“ (enviada), âœ“âœ“ (entregue), âœ“âœ“ğŸ”µ (lida)
â”‚
â””â”€â”€ COLUNA 3: INFORMAÃ‡Ã•ES (25%)
    â€¢ Dados do contato (nome, nÃºmero, tags)
    â€¢ HistÃ³rico de compras/pedidos
    â€¢ Controles rÃ¡pidos da IA para esta conversa
```

#### **2. FUNCIONALIDADES OBRIGATÃ“RIAS**
- **AtualizaÃ§Ã£o em tempo real**: WebSocket para novas mensagens (atualiza a cada 1-2 segundos)
- **Envio de mensagens**: Campo de texto + botÃ£o enviar + anexos (imagem, documento, Ã¡udio)
- **Modos de resposta**:
  - ğŸ§  **IA AutomÃ¡tica**: Responde sozinha (padrÃ£o)
  - ğŸ‘¨â€ğŸ’» **Manual**: Humano digita e envia
  - âš¡ **Misto**: IA sugere resposta, humano aprova
- **NotificaÃ§Ãµes**: Badge na aba quando nova mensagem chega
- **"Digitando..."**: Indicador quando o cliente estÃ¡ escrevendo

#### **3. DIFERENCIAÃ‡ÃƒO VISUAL DAS MENSAGENS**
```
MENSAGEM RECEBIDA (Cliente â†’ NÃ³s):
â€¢ Alinhamento: Esquerda
â€¢ Cor de fundo: Cinza claro (#F5F5F5)
â€¢ Ãcone: ğŸ‘¤ (avatar do cliente)
â€¢ Borda: Nenhuma

MENSAGEM ENVIADA PELA IA (NÃ³s â†’ Cliente):
â€¢ Alinhamento: Direita
â€¢ Cor de fundo: Azul suave (#E3F2FD)
â€¢ Ãcone: ğŸ§  (cÃ©rebro/IA)
â€¢ Borda: Sutil azul
â€¢ Tag: "IA" pequena abaixo da mensagem

MENSAGEM ENVIADA MANUALMENTE (Humano â†’ Cliente):
â€¢ Alinhamento: Direita
â€¢ Cor de fundo: Verde suave (#E8F5E9)
â€¢ Ãcone: ğŸ‘¨â€ğŸ’» (emoji de pessoa no computador)
â€¢ Borda: Sutil verde
```

## **ğŸ”— ABA 2: MEU WHATSAPP (GERENCIAMENTO DE CONEXÃ•ES)**

### **FLUXO DE CONEXÃƒO SIMPLIFICADO**
```
1. Cliente clica em "CONECTAR WHATSAPP"
2. Se for PRIMEIRA VEZ:
   â€¢ Abre modal pedindo CPF (formato: 000.000.000-00)
   â€¢ Valida CPF (11 dÃ­gitos, dÃ­gitos verificadores)
   â€¢ Cria pasta exclusiva: /sessions/[CPF]/
3. Gera QR CODE real
   â€¢ Exibe em modal grande
   â€¢ Contador de 60 segundos
   â€¢ BotÃ£o "REGENERAR QR" se expirar
4. ApÃ³s escanear:
   â€¢ Salva sessÃ£o na pasta do CPF
   â€¢ Status muda para "CONECTADO"
   â€¢ Mostra card da nova conta
```

### **CARD DE CONTA WHATSAPP (por CPF)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CARD DA CONTA                           â”‚
â”‚ â€¢ Avatar (gerado do CPF)                â”‚
â”‚ â€¢ CPF: 123.456.789-00                   â”‚
â”‚ â€¢ Status: ğŸŸ¢ CONECTADO (5 min atrÃ¡s)    â”‚
â”‚ â€¢ NÃºmero: +55 11 98765-4321             â”‚
â”‚                                         â”‚
â”‚ ğŸ“Š ESTATÃSTICAS:                        â”‚
â”‚ â€¢ Mensagens hoje: 48                    â”‚
â”‚ â€¢ Contatos: 12                          â”‚
â”‚ â€¢ Taxa resposta: 96%                    â”‚
â”‚                                         â”‚
â”‚ ğŸ›ï¸ CONTROLES:                          â”‚
â”‚ [ğŸ”„] Conectar/Desconectar               â”‚
â”‚ [â¸ï¸] Pausar/Retomar IA                  â”‚
â”‚ [ğŸ§¹] Limpar SessÃ£o                      â”‚
â”‚ [ğŸ—‘ï¸] Excluir Conta (com confirmaÃ§Ã£o)    â”‚
â”‚                                         â”‚
â”‚ [ğŸ’¬] Abrir Chat     [ğŸ§ ] MemÃ³ria IA     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **CONTROLES POR CONTA**
- **Conectar/Desconectar**: Alterna estado da conexÃ£o WhatsApp
- **Pausar IA**: Para a IA de responder automaticamente (botÃ£o fica laranja)
- **Limpar SessÃ£o**: Remove dados locais, mantÃ©m configuraÃ§Ãµes
- **Excluir Conta**: Remove pasta completa do CPF (pede confirmaÃ§Ã£o dupla)
- **Abrir Chat**: Vai direto para aba Chat com esta conta
- **MemÃ³ria IA**: Vai para aba MemÃ³ria IA jÃ¡ com esta conta selecionada

### **RECONEXÃƒO AUTOMÃTICA**
- Quando usuÃ¡rio volta ao sistema
- Verifica pasta do CPF
- Se tem sessÃ£o salva â†’ Reconecta automaticamente (sem pedir CPF)
- Se nÃ£o tem â†’ Pede novo QR Code
- Status atualizado em tempo real

## **ğŸ§  ABA 3: MEMÃ“RIA DE IA (CONFIGURAÃ‡ÃƒO REAL)**

### **PROBLEMA ATUAL**
- ConfiguraÃ§Ãµes nÃ£o funcionam na prÃ¡tica
- IA nÃ£o segue regras definidas
- Produtos cadastrados nÃ£o aparecem nas respostas

### **SOLUÃ‡ÃƒO: SISTEMA DE MEMÃ“RIA REAL**

#### **1. SELEÃ‡ÃƒO DE CONTA**
- Dropdown no topo: "Selecione uma conta (CPF)"
- Mostra apenas contas WhatsApp conectadas
- Ao selecionar â†’ Carrega configuraÃ§Ãµes especÃ­ficas daquela conta

#### **2. CONFIGURAÃ‡Ã•ES POR SEÃ‡ÃƒO**

**SEÃ‡ÃƒO 1: IDENTIDADE DA IA**
- Nome da IA: [ISA ________] (editÃ¡vel)
- Tom de voz: â–¢ Formal â–¢ Casual â–£ AmigÃ¡vel â–¢ TÃ©cnico
- SaudaÃ§Ã£o padrÃ£o: [OlÃ¡! Eu sou a [Nome], como posso ajudar?]
- Usar emojis: â–£ Sim (moderados) â–¢ NÃ£o

**SEÃ‡ÃƒO 2: CONHECIMENTO DA EMPRESA**
- **Card de texto expansÃ­vel** para cadastrar:
  - Nome da empresa, segmento
  - Produtos/serviÃ§os (com nome, descriÃ§Ã£o, preÃ§o)
  - HorÃ¡rio de funcionamento
  - Formas de pagamento
  - PolÃ­ticas importantes
- **Sistema de validaÃ§Ã£o**: Testa se os produtos cadastrados estÃ£o sendo reconhecidos

**SEÃ‡ÃƒO 3: REGRAS DE COMPORTAMENTO**
- [âœ“] Cumprimentar sempre que iniciar conversa
- [âœ“] Mostrar cardÃ¡pio sÃ³ quando cliente pedir
- [âœ“] Coletar endereÃ§o completo antes de finalizar pedido
- Palavras que pausam a IA: "humano", "atendente", "reclamaÃ§Ã£o"

**SEÃ‡ÃƒO 4: TESTE EM TEMPO REAL**
- Campo: "Teste sua IA: [Digite uma pergunta...]"
- BotÃ£o: [â–¶ï¸ TESTAR]
- Mostra como a IA responderia COM AS CONFIGURAÃ‡Ã•ES ATUAIS
- Exemplo:
  - VocÃª: "OlÃ¡, quero fazer um pedido"
  - ISA: "OlÃ¡! Antes de mostrar o cardÃ¡pio, poderia me dizer o que procura?" âœ…

#### **3. CONTROLES DA ABA**
- [ğŸ’¾ SALVAR] â†’ Salva tudo na pasta do CPF (arquivo `memory.json`)
- [ğŸ”„ RESTAURAR PADRÃƒO] â†’ Volta para configuraÃ§Ã£o inicial
- [ğŸ“¤ EXPORTAR] â†’ Baixa arquivo com configuraÃ§Ãµes
- [ğŸ“¥ IMPORTAR] â†’ Carrega configuraÃ§Ãµes de outro CPF

#### **4. SINCRONIZAÃ‡ÃƒO COM CHAT**
- Quando salva na MemÃ³ria IA â†’ Chat recarrega configuraÃ§Ãµes automaticamente
- Cada resposta no Chat usa a memÃ³ria especÃ­fica daquele CPF
- Sistema verifica se configuraÃ§Ãµes estÃ£o atualizadas antes de cada resposta

## **ğŸ”„ INTEGRAÃ‡ÃƒO ENTRE AS 3 ABAS**

### **FLUXO DO USUÃRIO**
```
1. ABA WHATSAPP â†’ Conecta conta com CPF
2. ABA MEMÃ“RIA IA â†’ Configura comportamento da IA para essa conta
3. ABA CHAT â†’ Usa a conta conectada, com IA configurada
```

### **DADOS COMPARTILHADOS**
- **Pasta por CPF** armazena tudo:
  - SessÃ£o WhatsApp (da aba WhatsApp)
  - ConfiguraÃ§Ãµes IA (da aba MemÃ³ria)
  - HistÃ³rico de conversas (da aba Chat)
- AtualizaÃ§Ã£o em uma aba â†’ Salva na pasta â†’ Outras abas leem automaticamente

### **NAVEGAÃ‡ÃƒO RÃPIDA**
- No card WhatsApp: BotÃ£o "ğŸ’¬ CHAT" â†’ Abre Chat com essa conta
- No card WhatsApp: BotÃ£o "ğŸ§  MEMÃ“RIA" â†’ Abre MemÃ³ria IA jÃ¡ com CPF selecionado
- No Chat: Link "Configurar IA" â†’ Vai para MemÃ³ria IA da conta ativa
- Na MemÃ³ria IA: BotÃ£o "Testar no Chat" â†’ Abre conversa de teste

## **âœ… CRITÃ‰RIOS DE SUCESSO**

### **PARA O CHAT:**
- [ ] Mostra mensagens recebidas E enviadas
- [ ] Atualiza automaticamente (sem precisar dar F5)
- [ ] Interface moderna tipo WhatsApp Web
- [ ] DiferenciaÃ§Ã£o clara entre mensagens da IA e humanas
- [ ] Status de entrega das mensagens (âœ“, âœ“âœ“, âœ“âœ“ğŸ”µ)

### **PARA O WHATSAPP:**
- [ ] ConexÃ£o real via QR Code
- [ ] AutenticaÃ§Ã£o por CPF na primeira vez
- [ ] ReconexÃ£o automÃ¡tica em visitas futuras
- [ ] Cards com controles completos por conta
- [ ] Status em tempo real

### **PARA A MEMÃ“RIA IA:**
- [ ] ConfiguraÃ§Ãµes realmente afetam o comportamento da IA
- [ ] Produtos cadastrados aparecem nas respostas
- [ ] Teste em tempo real funciona
- [ ] SincronizaÃ§Ã£o automÃ¡tica com o Chat
- [ ] Cada CPF tem sua configuraÃ§Ã£o independente

## **ğŸš€ ENTREGÃVEIS FINAIS**
1. **Chat moderno e funcional** que mostra todo o histÃ³rico
2. **Sistema de conexÃ£o WhatsApp** com CPF e sessÃµes persistentes
3. **MemÃ³ria IA configurÃ¡vel** que realmente funciona
4. **IntegraÃ§Ã£o completa** entre as trÃªs abas
5. **ExperiÃªncia unificada** para gerenciar WhatsApp com IA

---

**Este prompt foca apenas nas melhorias necessÃ¡rias, sem alterar o que jÃ¡ estÃ¡ funcionando (como sistema de matrÃ­culas e aprovaÃ§Ã£o de clientes).**